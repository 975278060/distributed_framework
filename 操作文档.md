## 1、操作步骤

### 1.1、写好你自己的业务函数，这一步与消费框架无关。
例如：
~~~
def add(x,y):
    return x + y
~~~

### 1.2、将函数传给消费框架，并启动执行。
~~~
# 1.2.1 导入生成各种不同类型中间件的consumer的工厂函数。
from function_scheduling_distributed_framework import get_consumer,patch_frame_config,ConsumersManager

# 1.2.2 例如当你使用redis作为中间件，则需要配置redis的账号密码 ip等。
patch_frame_config(REDIS_HOST='127.0.0.1',
                       REDIS_PASSWORD='123456',
                       REDIS_PORT=6379,
                       REDIS_DB=7,)

# 1.2.3 实例化生成一个消费者,这里生成的是redis为中间件，可确认消费的消费者。更多的函数运行控制见readme的说明。
consumer_add = get_consumer('queue_test569', consuming_function=add, broker_kind=9)

# 1.2.4 开启并发消费,默认是在一个新的线程里面开始循环调度任务消费，所以当前主线程下，
#       可以在当前主线程连续对多个consumer实例执行start_consuming_message方法，同时消费多个队列和执行响应的函数。
ConsumersManager.show_all_consumer_info() # 这行是显示所有注册的消费者信息，可以不执行。
consumer_add.start_consuming_message()

# 1.2.5 发布一个任务到中间件，一般推送是写在另外的脚本。这里写在一起。
consumer_add.publisher_of_same_queue.publish(dict(x=1,y=2))

# 1.2.5.2 发布一个任务到中间件，并且使用同步的方式等待结果返回。
async_result = consumer_add.publisher_of_same_queue.publish(dict(x=3,y=4),independence_control_config=IndependenceFuctionConsumingControlConfig(is_using_rpc_mode=True))
print(async_result.result)
~~~ 
